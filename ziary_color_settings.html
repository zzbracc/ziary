
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>🎨 自訂配色</title>
  



<style>
body {
  font-family: 'Zen Maru Gothic', sans-serif;
  background-color: #fffaf5;
  padding: 20px 0;
  margin: 0;
  text-align: center;
}

h1 {
  font-family: 'Nanum Pen Script', cursive;
  font-size: 40px;
  font-weight: normal;
  margin: 24px 0 16px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  padding: 0 12px;
  box-sizing: border-box;
}

.preview-dot {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 50%;
  border: 2px solid #ccc;
  background-color: white;
  box-sizing: border-box;
}

input[type='color'] {
  width: 100%;
  aspect-ratio: 1;
  transform: scale(0.7);
  transform-origin: center;
  border: none;
  padding: 0;
  appearance: none;
  -webkit-appearance: none;
  box-sizing: border-box;
}

/* 手機以下畫面可以縮小標題字 */
@media (max-width: 480px) {
  h1 {
    font-size: 32px;
    margin: 16px 0;
  }
  .grid {
    gap: 10px;
  }
}

/* 平板與小筆電適度調整 */
@media (min-width: 768px) {
  h1 {
    font-size: 44px;
  }
  .grid {
    max-width: 600px;
    margin: 0 auto;
  }
}
</style>

</head>
<body>
  <h1 style="font-family: \'Nanum Pen Script\', cursive; font-size: 48px; text-align: center; margin-bottom: 24px;">🎨 自訂配色</h1>

  <div id="dotGrid" class="grid" style="margin-bottom: 24px;"></div>
  

  <button onclick="saveColors()" style="font-size: 48px; margin: 24px 12px 0;">儲存設定</button>
  <button onclick="resetColors()" style="font-size: 48px; margin: 24px 12px 0;">預設值</button>

  




<input type="color" id="sharedColorPicker" style="position: fixed; top: 0; left: 0; opacity: 0.01; width: 1px; height: 1px; z-index: -1;" />


<script>
const defaultColors = ['#CC5F5A', '#ff9933', '#FFD700', '#B5866C', '#BED06F', '#769EDB', '#30BEBF', '#d3d3d3', '#000000'];
let colorMap = JSON.parse(localStorage.getItem("ziary-colorMap") || "[]");
if (!Array.isArray(colorMap) || colorMap.length !== 9) colorMap = [...defaultColors];

const dotGrid = document.getElementById("dotGrid");
const picker = document.getElementById("sharedColorPicker");
let currentIndex = null;

for (let i = 0; i < 9; i++) {
  const dot = document.createElement("div");
  dot.className = "preview-dot";
  dot.style.backgroundColor = colorMap[i];
  dot.id = "dot-" + i;

  dot.addEventListener("click", () => {
    currentIndex = i;
    picker.value = colorMap[i];
    picker.click();
  });

  dotGrid.appendChild(dot);
}

picker.addEventListener("input", () => {
  if (currentIndex !== null) {
    const newColor = picker.value;
    colorMap[currentIndex] = newColor;
    document.getElementById("dot-" + currentIndex).style.backgroundColor = newColor;
    localStorage.setItem("ziary-colorMap", JSON.stringify(colorMap));
  }
});

function resetColors() {
  for (let i = 0; i < 9; i++) {
    colorMap[i] = defaultColors[i];
    const dot = document.getElementById("dot-" + i);
    dot.style.backgroundColor = defaultColors[i];
  }
  localStorage.setItem("ziary-colorMap", JSON.stringify(colorMap));
}

function saveColors() {
  localStorage.setItem("ziary-colorMap", JSON.stringify(colorMap));
}
</script>

</body>
</html>
